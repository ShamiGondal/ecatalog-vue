import{_ as G,m as J,F as K,G as Q,r as d,o as W,P as X,v as r,x as e,z as f,H as a,K as $,E as h,R as P,I,J as M,i as Z,t as l,y as _,A as tt,B as E,C as et,D as st,S as at}from"./oHqGifPf.js";import{u as ot}from"./C5kR9Ipr.js";import{u as ct,B as nt,C as lt,F as rt}from"./BRGN4kAp.js";import{M as it,F as dt}from"./DuWI_CRV.js";import"./BvCvxN9Z.js";import"./BAVdmurI.js";import"./DH2dHN1I.js";import"./CS5Lf4jr.js";const C=u=>(et("data-v-eccfd9ab"),u=u(),st(),u),ut={class:"md:container md:mx-auto flex flex-col sub"},pt={style:{"min-height":"90vh"}},mt={style:{"margin-top":"1px"}},_t={class:"flex flex-col mt-4"},gt={id:"stikcy_filters",style:{position:"sticky",top:"0",background:"white",transition:"padding-top 0.3s ease","margin-top":"-5px"}},ht={class:"filters-container"},vt={class:"flex ml-1 mr-2"},yt=["onClick"],ft={key:0,class:"w-[80%]",style:{"margin-left":"8%"}},xt=at('<div class="col-span-6" data-v-eccfd9ab><div class="w-full h-32 bg-gray-200 animate-pulse" data-v-eccfd9ab></div></div><div class="col-span-6" data-v-eccfd9ab><div class="h-8 w-full bg-gray-200 animate-pulse mb-2" data-v-eccfd9ab></div><div class="h-8 w-full bg-gray-200 animate-pulse mb-2" data-v-eccfd9ab></div><div class="h-8 w-full bg-gray-200 animate-pulse" data-v-eccfd9ab></div></div>',2),bt=[xt],wt={key:1,class:"pt-2 ml-2",style:{"overflow-y":"auto"}},kt={key:0,class:"grid grid-cols-10 gap-4 items-center p-0 pt-2 pb-1",style:{"margin-left":"8%"}},It={class:"col-span-4",style:{"margin-top":"-2%"}},Mt=["src"],Ct={class:"col-span-6",style:{"margin-top":"-4%"}},St={class:"intro_1"},Tt={class:"intro_2"},At=C(()=>e("br",null,null,-1)),Bt={class:"intro_3"},Ft=C(()=>e("hr",{class:"h-px bg-gray-300 my-3",style:{"margin-left":"30px"}},null,-1)),Dt={key:2,class:"w-[80%]",style:{"margin-top":"50%"}},Nt=C(()=>e("p",{class:"text-[12px] items-center justify-center text-center"},"No products found.",-1)),Rt=[Nt],$t={mounted(){const u=document.getElementById("sidebar"),p=document.getElementById("stikcy_filters");window.addEventListener("scroll",function(){window.scrollY>=350?(u.style.paddingTop="100px",p.style.paddingTop="40px"):(u.style.paddingTop="0",p.style.paddingTop="0")})}},Pt=Object.assign($t,{__name:"product-list",setup(u){const p=J().$axios,m=K(),x=Q(),V=m.params.name,S=d(!1),v=d([]),T=d([]),b=d(m.query.subcategory),y=d([]),g=d([]),A=d("About us"),i=d(!0),q=s=>{S.value=s,console.log("Modal opened status:",s)},z=ct(),B=async s=>{const o=`/ecatalog/productCategory?parentId=${s}`;await p.get(o).then(c=>{T.value=c.data.list}).catch(c=>{console.log(c),x.push("/404")})},F=()=>{i.value=!0,setTimeout(()=>{const s=`/ecatalog/product?categoryId=${b.value}`;p.get(s).then(o=>{v.value=o.data.products}).catch(o=>{console.log(o),x.push("/404")}).finally(()=>{i.value=!1})},2e3)},L=s=>{b.value=s,F()},O=s=>{const o=s.map(n=>parseFloat(n.product_regular_price)),c=Math.min(...o).toFixed(2),t=Math.max(...o).toFixed(2);return c!=t?`RM ${c} - RM ${t}`:`RM ${c}`},Y=async()=>{var o,c,t;const s="/ecatalog/merchant/superstore";try{const n=await p.get(s);console.log(n),y.value=((o=n.data)==null?void 0:o.slideshow)||[],g.value=((c=n.data)==null?void 0:c.merchant)||{};const w=(t=n.data)==null?void 0:t.content;let k=null;Array.isArray(w)?k=w.find(U=>U.content_page==="INTRO"):console.warn("Content data is missing or not an array."),A.value=k?k.content_text:"About...";const D=g.value.merchant_name||"Default Title",j=D,N="-",H=N;let R=null;g.value.merchant_logo&&(R=`https://phplaravel-996806-4363314.cloudwaysapps.com/${g.value.merchant_logo}`),ot({title:D,ogTitle:j,description:N,ogDescription:H,ogImage:R})}catch(n){console.error("Error fetching merchant data:",n),x.push("/404")}};return W(()=>{Y(),m.query.category&&B(m.query.category),m.query.subcategory&&F()}),X([()=>z.filteredData],([s])=>{B(0),i.value=!0,setTimeout(()=>{v.value=s,i.value=!1},2e3)},{immediate:!0}),(s,o)=>{const c=Z("router-link");return l(),r("div",ut,[e("div",pt,[f(it,{title:"product"}),e("div",mt,[a(y)&&a(y).length>0?(l(),$(nt,{key:0,title:"product",images:a(y)},null,8,["images"])):h("",!0)]),e("div",_t,[f(lt,{class:"mx-5 pb-2",description:a(A),image:a(g).merchant_logo,title:"product"},null,8,["description","image"]),e("div",gt,[e("div",ht,[f(rt,{class:"mx-5",onModalOpened:q})])]),e("div",vt,[e("div",{class:P(["ml-2 flex flex-col items-start w-[20%]",{"sticky-sidebar":!a(S)}]),id:"sidebar",style:{top:"0",height:"calc(100vh - 120px)",transition:"padding-top 0.3s ease"}},[(l(!0),r(I,null,M(a(T),(t,n)=>(l(),r("div",{key:n,onClick:w=>L(t.category_id),class:P([{active:a(b)==t.category_id},"mt-2 menu-2 curved_menu transition-all duration-300"]),style:{"border-top-right-radius":"10px"}},[e("p",null,_(t.category_name),1)],10,yt))),128))],2),a(i)?(l(),r("div",ft,[(l(),r(I,null,M(5,t=>e("div",{key:t,style:{"margin-left":"8%"},class:"grid grid-cols-12 gap-4 items-center p-0 pt-2 pb-1"},bt)),64))])):h("",!0),a(i)?h("",!0):(l(),r("div",wt,[(l(!0),r(I,null,M(a(v),(t,n)=>(l(),$(c,{key:n,to:"/"+a(V)+"/product/"+t.product_group_id},{default:tt(()=>[a(i)?h("",!0):(l(),r("div",kt,[e("div",It,[e("img",{src:"https://admin.ecatalog.cloud/uploads/ftp/"+t.image[0].image_file,alt:"Image",class:"w-full"},null,8,Mt)]),e("div",Ct,[e("p",St,_(t.product_group_name),1),e("p",Tt,[E(" H"+_(t.product[0].product_height)+"mm | "+_(t.product.length+" Sizes")+" ",1),At,E(" "+_(t.product_group_color),1)]),e("p",Bt,_(O(t.product)),1)])])),Ft]),_:2},1032,["to"]))),128))])),!a(i)&&a(v).length==0?(l(),r("div",Dt,Rt)):h("",!0)])])]),f(dt)])}}}),Ht=G(Pt,[["__scopeId","data-v-eccfd9ab"]]);export{Ht as default};
